<% provide(:title, "Gráficos de Atendimentos") %>
<title><%= yield(:title) %></title>

<%= render 'layouts/searcher' %>

<center>
    <h1>Gráfico de Atendimentos</h1>
    <div class="span8">
        <script type="text/javascript" charset="utf-8">
         
            $(document).ready(function() 
            {         
                var chart = new Highcharts.Chart({
                    chart: 
                    {
                        renderTo: 'container',
                        type: 'pie',

                        options3d: 
                        {
                            enabled: true,
                            alpha: 45,
                            beta: 0
                        }
                    },

                    title: 
                    {
                        text: 'Atendimentos por Estado'
                    },

                    tooltip: 
                    {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },

                    plotOptions: 
                    {
                        pie: 
                        {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            depth: 35,

                            dataLabels: 
                            {
                                enabled: false,
                                format: '{point.name}'
                            }
                        }
                    },

                    legend:
                    {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 100,
                        borderWidth: 0,

                        labelFormatter: function() 
                        {
                            if(this.name!='series')
                            {
                                return this.name;
                            } else
                            {
                                return 'Legend';
                            }
                        }
                    },

                    series: [{
                        showInLegend:true,
                        type: 'pie',
                        name: 'Atendimentos',
                        data: <%=raw @hash_uf.map { |key, value| [key, value] } %>
                    }]
                });
            });
        </script>

        <div id="container" st.yle="height: 300px"></div>
    </div>
</center>
